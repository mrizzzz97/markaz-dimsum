<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta name="description" content="Markaz Dimsum - Dimsum Halal, Enak, dan Murah" />
  <meta name="author" content="Markaz Dimsum" />
  <link rel="stylesheet" href="style/main.css">
  <title>Markaz Dimsum - Dimsum Halal, Enak, dan Murah</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
</head>
<body>
  <!-- Splash Welcome Modal -->
  <div id="welcomeModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="welcomeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content glass-card rounded-4 shadow-lg border-0" style="backdrop-filter: blur(16px); background: rgba(255,255,255,0.85);">
        <div class="modal-body text-center p-5">
          <h2 class="font-weight-bold mb-3" style="color:#1dbf73; letter-spacing:1px;">Selamat Datang di Markaz Dimsum</h2>
          <p class="mb-4" style="font-size:1.1rem; color:#555;">Beli aneka produk di Toko Manna w Salwa secara online sekarang. Kamu bisa beli produk dari Toko Manna w Salwa dengan aman & mudah dari Kab. Bekasi. Ingin belanja lebih hemat & terjangkau di Toko Manna w Salwa? Kamu bisa gunakan fitur Cicilan 0% dari berbagai bank sehingga kamu bisa belanja online dengan nyaman di Tokopedia. Beli aneka produk terbaru di Toko Manna w Salwa dengan mudah dari genggaman tangan kamu menggunakan Aplikasi Tokopedia. Cek terus juga Toko Manna w Salwa untuk update Produk, Kode Voucher hingga Promo Terbaru dari Toko Manna w Salwa Terbaru secara online di Tokopedia!</p>
          <button type="button" class="btn btn-success rounded-pill px-4 py-2 font-weight-bold" data-dismiss="modal" id="welcomeBtn">Masuk Website</button>
        </div>
      </div>
    </div>
  </div>
  <!-- End Splash Welcome Modal -->

  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top glass-navbar shadow-sm">
    <div class="container">
      <a href="index.html" class="navbar-brand d-flex align-items-center">
        <img src="images/logo.png" alt="Logo Markaz Dimsum" height="36" class="mr-2"/>
        <span class="font-weight-bold" style="font-size:1.6rem; color:#1dbf73; letter-spacing:1px;">Markaz Dimsum</span>
      </a>
      <button class="navbar-toggler ml-auto d-block" id="sidebarToggle" type="button" aria-label="Toggle navigation" style="position:absolute;right:18px;top:18px;z-index:1101;background:none;border-radius:0;box-shadow:none;transition:background 0.2s;">
        <span class="navbar-toggler-icon" id="sidebarIcon" style="filter:drop-shadow(0 2px 8px #1dbf7350);transition:all 0.3s;"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-end sidebar-modern" id="mainMenu">
        <div class="sidebar-content p-4 rounded-right shadow-lg animate__animated animate__fadeInRight animate__faster" style="min-height:100vh;max-width:360px;width:92vw;background:linear-gradient(135deg,#e9fbe5 0%,#fffbe0 100%);backdrop-filter:blur(18px);box-shadow:0 8px 32px #1dbf7340;position:fixed;top:0;right:0;z-index:1050;overflow-y:auto;transition:all 0.35s cubic-bezier(.77,0,.18,1);">
          <button class="close btn btn-light rounded-circle position-absolute animate__animated animate__fadeIn animate__faster" id="sidebarCloseBtn" style="top:18px;right:18px;width:38px;height:38px;z-index:1100;display:none;"></button>
          <div class="text-center mb-4 animate__animated animate__zoomIn animate__faster">
            <img src="images/logo.png" alt="Logo Markaz Dimsum" height="56" class="mb-2" style="filter:drop-shadow(0 2px 12px #1dbf7340);"/>
            <div class="font-weight-bold" style="font-size:1.4rem;color:#1dbf73;text-shadow:0 2px 8px #fff7;">Markaz Dimsum</div>
          </div>
          <ul class="navbar-nav text-right mb-4 animate__animated animate__fadeInUp animate__faster">
            <li class="nav-item"><a href="index.html" class="nav-link">Beranda</a></li>
            <li class="nav-item"><a href="tentang.html" class="nav-link">Tentang</a></li>
            <li class="nav-item"><a href="#kontak" class="nav-link">Kontak</a></li>
            <li class="nav-item"><a href="login.html" class="nav-link font-weight-bold text-success"><i class="bi bi-person-circle mr-1"></i>Admin Login</a></li>
          </ul>
          <div class="d-flex justify-content-center mb-3">
            <button class="theme-toggle" id="themeToggleBtn" aria-label="Toggle dark mode">
              <i class="bi bi-sun-fill sun"></i>
              <i class="bi bi-moon-fill moon"></i>
            </button>
          </div>
          <hr class="animate__animated animate__fadeIn animate__faster">
        </div>
      </div>
    </div>
  </nav>
  <style>
    .sidebar-modern {
      transition: all 0.35s cubic-bezier(.77,0,.18,1);
    }
    .sidebar-modern:not(.show) .sidebar-content {
      transform: translateX(100%);
      opacity: 0;
      pointer-events: none;
    }
    .sidebar-modern.show .sidebar-content {
      transform: translateX(0);
      opacity: 1;
      pointer-events: auto;
      box-shadow: 0 8px 32px #1dbf7340;
      animation: sidebarPop 0.5s cubic-bezier(.68,-0.55,.27,1.55);
    }
    @keyframes sidebarPop {
      0% { opacity: 0; transform: translateX(60%) scale(0.95); }
      80% { opacity: 1; transform: translateX(-2%) scale(1.03); }
      100% { opacity: 1; transform: translateX(0) scale(1); }
    }
    .sidebar-modern .close {
      display: none;
    }
    .sidebar-open .sidebar-modern .close {
      display: block;
    }
    .sidebar-modern ul li {
      transition: background 0.2s, color 0.2s;
      border-radius: 8px;
      padding: 2px 0 2px 0;
    }
    .sidebar-modern ul li:hover, .sidebar-modern .kategori-link:hover {
      background: linear-gradient(90deg,#fffbe0 0%,#e9fbe5 100%);
      color: #1dbf73;
      text-shadow:0 2px 8px #fff7;
    }
    .sidebar-modern .kategori-link {
      color: #222;
      font-weight: 500;
      text-decoration: none;
      transition: color 0.2s, background 0.2s, box-shadow 0.2s;
      border-radius: 6px;
      padding: 2px 6px;
      display: inline-block;
    }
    .sidebar-modern .kategori-link:active {
      background: #1dbf7315;
      color: #1dbf73;
    }
    .sidebar-modern .sidebar-content {
      box-shadow: 0 8px 32px #1dbf7340;
      border-top-left-radius: 2rem;
      border-bottom-left-radius: 2rem;
      border-right: 3px solid #1dbf73;
      animation: sidebarPop 0.5s cubic-bezier(.68,-0.55,.27,1.55);
    }
    /* Hamburger to X animation */
    .navbar-toggler-icon {
      width: 28px;
      height: 28px;
      display: inline-block;
      position: relative;
      transition: all 0.3s cubic-bezier(.77,0,.18,1);
    }
    .navbar-toggler-icon, .navbar-toggler-icon:before, .navbar-toggler-icon:after {
      background: #1dbf73;
      border-radius: 2px;
      height: 4px;
      width: 100%;
      position: absolute;
      left: 0;
      content: '';
      transition: all 0.3s cubic-bezier(.77,0,.18,1);
      display: block;
    }
    .navbar-toggler-icon:before {
      top: -9px;
    }
    .navbar-toggler-icon:after {
      top: 9px;
    }
    .sidebar-open .navbar-toggler-icon {
      background: transparent;
    }
    .sidebar-open .navbar-toggler-icon:before {
      transform: rotate(45deg);
      top: 0;
      background: #e74c3c;
    }
    .sidebar-open .navbar-toggler-icon:after {
      transform: rotate(-45deg);
      top: 0;
      background: #e74c3c;
    }
  </style>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      var toggler = document.getElementById('sidebarToggle');
      var menu = document.getElementById('mainMenu');
      var menuBtn = document.getElementById('menuSidebarBtn');
      var closeBtn = document.getElementById('sidebarCloseBtn');
      var body = document.body;
      // Sidebar SELALU tersembunyi saat load
      function hideSidebar() {
        menu.classList.remove('show');
        body.classList.remove('sidebar-open');
        closeBtn.style.display = 'none';
        toggler.setAttribute('aria-expanded', 'false');
      }
      function showSidebar() {
        menu.classList.add('show');
        body.classList.add('sidebar-open');
        closeBtn.style.display = 'block';
        toggler.setAttribute('aria-expanded', 'true');
      }
      hideSidebar();
      toggler.addEventListener('click', function() {
        if (menu.classList.contains('show')) {
          hideSidebar();
        } else {
          showSidebar();
        }
      });
      closeBtn.addEventListener('click', function() {
        hideSidebar();
      });
      menu.querySelectorAll('a').forEach(function(link) {
        link.addEventListener('click', function() {
          hideSidebar();
        });
      });
      // Modal Welcome: tampilkan modal saat load, hanya hilang jika tombol diklik
      setTimeout(function() {
        $('#welcomeModal').modal({backdrop: 'static', keyboard: false});
        $('#welcomeModal').modal('show');
        // Pastikan modal content selalu tampil
        $("#welcomeModal .modal-content").css({display:'block', opacity:1, transform:'none'});
      }, 400);
      $('#welcomeBtn').on('click', function(){
        $('#welcomeModal').modal('hide');
      });

      // Theme toggle
      const themeBtn = document.getElementById('themeToggleBtn');
      if (themeBtn) {
        themeBtn.addEventListener('click', function() {
          const isDark = !document.body.classList.contains('dark-mode');
          setTheme(isDark);
          updateThemeIcon();
        });
        // Set initial theme
        const saved = localStorage.getItem('theme');
        setTheme(saved === 'dark');
        updateThemeIcon();
      }
    });

    // === DARK MODE ===
    function setTheme(dark) {
      if (dark) {
        document.body.classList.add('dark-mode');
        localStorage.setItem('theme', 'dark');
      } else {
        document.body.classList.remove('dark-mode');
        localStorage.setItem('theme', 'light');
      }
    }
    function updateThemeIcon() {
      const isDark = document.body.classList.contains('dark-mode');
      document.querySelector('.theme-toggle .sun').style.opacity = isDark ? 0 : 1;
      document.querySelector('.theme-toggle .moon').style.opacity = isDark ? 1 : 0;
    }
  </script>
  <!-- End Navigation -->

  <!-- Carousel -->
  <section class="store-carousel mb-5" style="margin-top: 90px;">
    <div class="container">
      <div class="carousel slide carousel-fade shadow-lg rounded-4 overflow-hidden position-relative glass-card" id="storeCarousel" data-ride="carousel" data-interval="3500" data-pause="false" style="border-radius: 2rem;">
        <ol class="carousel-indicators" style="bottom:22px;">
          <li class="active" data-target="#storeCarousel" data-slide-to="0" style="width:18px;height:18px;border-radius:50%;background:#1dbf73;border:3px solid #fff;"></li>
          <li data-target="#storeCarousel" data-slide-to="1" style="width:18px;height:18px;border-radius:50%;background:#eee;border:3px solid #fff;"></li>
          <li data-target="#storeCarousel" data-slide-to="2" style="width:18px;height:18px;border-radius:50%;background:#eee;border:3px solid #fff;"></li>
        </ol>
        <div class="carousel-inner">
          <div class="carousel-item active">
            <img src="images/products/produk-1.png" class="d-block w-100 img-fluid" alt="Dimsum Markaz 1" style="object-fit:cover; height:400px; border-radius:2rem; filter:brightness(0.97) saturate(1.1);">
          </div>
          <div class="carousel-item">
            <img src="images/products/produk-2.png" class="d-block w-100 img-fluid" alt="Dimsum Markaz 2" style="object-fit:cover; height:400px; border-radius:2rem; filter:brightness(0.97) saturate(1.1);">
          </div>
          <div class="carousel-item">
            <img src="images/products/produk-3.png" class="d-block w-100 img-fluid" alt="Dimsum Markaz 3" style="object-fit:cover; height:400px; border-radius:2rem; filter:brightness(0.97) saturate(1.1);">
          </div>5
        </div>
        <a class="carousel-control-prev" href="#storeCarousel" role="button" data-slide="prev" style="width:48px;height:48px;top:50%;transform:translateY(-50%);background:rgba(255,255,255,0.7);border-radius:50%;box-shadow:0 2px 8px #0002;">
          <span class="carousel-control-prev-icon" aria-hidden="true" style="filter:drop-shadow(0 2px 8px #0005);"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#storeCarousel" role="button" data-slide="next" style="width:48px;height:48px;top:50%;transform:translateY(-50%);background:rgba(255,255,255,0.7);border-radius:50%;box-shadow:0 2px 8px #0002;">
          <span class="carousel-control-next-icon" aria-hidden="true" style="filter:drop-shadow(0 2px 8px #0005);"></span>
          <span class="sr-only">Next</span>
        </a>
        <script>
          $(document).ready(function(){
            $('#storeCarousel').carousel({
              interval: 3500,
              ride: 'carousel',
              pause: false,
              wrap: true
            });
          });
        </script>
      </div>
    </div>
  </section>

  <!-- New Products -->
  <section class="new-products container mb-5" data-aos="fade-up">
    <h3 class="mb-4 font-weight-bold" style="color:#1dbf73;">Semua Produk</h3>
    <div class="row">
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer-markaz mt-5" style="background:#232323;color:#fff;">
    <div class="container py-5">
      <div class="row">
        <div class="col-md-4 mb-4 mb-md-0">
          <h4 class="font-weight-bold mb-3" style="color:#1dbf73;">KONTAK</h4>
          <img src="images/logo.png" alt="Logo Markaz Dimsum" style="height:48px;filter:drop-shadow(0 2px 8px #1dbf7340);margin-bottom:10px;">
          <div class="mb-2">WA: <a href="https://wa.me/6281770825467" class="text-white">+62-817-7082-5467</a></div>
          <div class="mb-2">Instagram: <a href="https://instagram.com/markazdimsum" class="text-white">@markazdimsum</a></div>
          <div class="mb-2">Alamat: Spring fiesta, Ak 9 No 20, Lambangsari, Kec. Tambun Sel., Kabupaten Bekasi, Jawa Barat 17510</div>
        </div>
        <div class="col-md-4 mb-4 mb-md-0">
          <h4 class="font-weight-bold mb-3" style="color:#1dbf73;">KATEGORI</h4>
          <div class="mb-2">Dimsum Frozen</div>
          <div class="mb-2">Dimsum Matang</div>
          <div class="mb-2">Frozen Food Lainnya</div>
          <div class="mb-2">Saos Dimsum</div>
        </div>
        <div class="col-md-4">
          <h4 class="font-weight-bold mb-3" style="color:#1dbf73;">MENU</h4>
          <div class="mb-2"><a href="index.html" class="text-white">Beranda</a></div>
          <div class="mb-2"><a href="tentang.html" class="text-white">Tentang</a></div>
          <div class="mb-2"><a href="#kontak" class="text-white">Kontak</a></div>
          <div class="mb-2"><a href="https://www.tokopedia.com/mannawsalwa" class="text-white" target="_blank">Tokopedia</a></div>
        </div>
      </div>
    </div>
    <div style="background:#1dbf73;color:#fff;">
      <div class="container d-flex justify-content-between align-items-center py-2">
        <div>&copy; 2025 Markaz Dimsum. All Rights Reserved.</div>
        <div>
          <a href="https://instagram.com/markazdimsum" target="_blank" class="text-white mr-3"><i class="bi bi-instagram"></i></a>
          <a href="https://wa.me/6281770825467" target="_blank" class="text-white mr-3"><i class="bi bi-whatsapp"></i></a>
        </div>
      </div>
    </div>
  </footer>
  <style>
    .footer-markaz a.text-white:hover { color: #1dbf73!important; text-decoration: underline; }
    .footer-markaz h4 { letter-spacing:1px; }
  </style>

  <!-- JavaScript -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script>
    AOS.init();
  </script>
  <script>
    // Search Produk
    document.addEventListener('DOMContentLoaded', function() {
      const searchForm = document.querySelector('.search-bar');
      const searchInput = searchForm.querySelector('input');
      const produkSection = document.querySelector('.new-products .row');
      const produkCards = Array.from(produkSection.children);
      const produkTitle = document.querySelector('.new-products h3');
      let resultInfo = document.createElement('div');
      resultInfo.className = 'search-result-info mb-3';
      produkTitle.insertAdjacentElement('afterend', resultInfo);

      function filterProduk(keyword) {
        let found = 0;
        const q = keyword.trim().toLowerCase();
        produkCards.forEach(card => {
          const nama = card.querySelector('a.font-weight-bold');
          if (nama && nama.textContent.toLowerCase().includes(q)) {
            card.style.display = '';
            found++;
          } else {
            card.style.display = 'none';
          }
        });
        if (q.length === 0) {
          resultInfo.textContent = '';
        } else if (found === 0) {
          resultInfo.innerHTML = '<span class="text-danger font-weight-bold">Produk tidak ditemukan</span>';
        } else {
          resultInfo.innerHTML = `<span class="text-success font-weight-bold">${found} produk ditemukan</span>`;
        }
      }

      searchForm.addEventListener('submit', function(e) {
        e.preventDefault();
        filterProduk(searchInput.value);
      });
      searchInput.addEventListener('input', function() {
        filterProduk(this.value);
      });

      // Show Welcome Modal
      $('#welcomeModal').modal('show');
    });

    // Kategori filter
    function filterByCategory(kat) {
      const produkCards = document.querySelectorAll('.new-products .row > div');
      let found = 0;
      produkCards.forEach(card => {
        let nama = card.querySelector('a.font-weight-bold');
        let show = false;
        if (kat === 'frozen-dimsum' && nama && nama.textContent.toLowerCase().includes('dimsum')) show = true;
        else if (kat === 'frozen-lain' && nama && (nama.textContent.toLowerCase().includes('bento') || nama.textContent.toLowerCase().includes('sambosa'))) show = true;
        else if (kat === 'frozen-lain' && nama && !nama.textContent.toLowerCase().includes('dimsum')) show = true;
        else if (kat === 'tambahan' && nama && nama.textContent.toLowerCase().includes('saos')) show = true;
        if (show) {
          card.style.display = '';
          found++;
        } else {
          card.style.display = 'none';
        }
      });
      // Update info
      const resultInfo = document.querySelector('.search-result-info');
      if (found === 0) {
        resultInfo.innerHTML = '<span class="text-danger font-weight-bold">Produk tidak ditemukan</span>';
      } else {
        resultInfo.innerHTML = `<span class="text-success font-weight-bold">${found} produk ditemukan</span>`;
      }
    }

    // Ambil produk dari localStorage (versi awal)
    function getProdukList() {
      let produk = localStorage.getItem('produkList');
      if (!produk) return [];
      try {
        return JSON.parse(produk);
      } catch (e) {
        return [];
      }
    }

    function renderProdukHome() {
      const produkList = getProdukList();
      const produkRow = document.querySelector('.new-products .row');
      produkRow.innerHTML = '';
      if (!produkList || produkList.length === 0) {
        produkRow.innerHTML = '<div class="col-12 text-center text-danger font-weight-bold">Produk tidak tersedia.</div>';
        return;
      }
      produkList.forEach((p, i) => {
        produkRow.innerHTML += `
        <div class="col-12 col-md-6 col-lg-4 mb-4" data-aos="fade-up" data-aos-delay="${100 + i * 100}">
          <a href="produk.html?id=${i}" class="text-decoration-none">
            <div class="card product-card glass-card h-100 rounded-4 shadow-sm border-0">
              <img src="${p.gambar}" alt="${p.nama}" class="card-img-top img-fluid rounded-top-4" style="object-fit:cover; height:220px;">
              <div class="card-body" style="background:rgba(233,251,229,0.8);">
                <span class="font-weight-bold text-dark d-block mb-1" style="font-size:1.1rem;">${p.nama}</span>
                <span class="text-danger d-block mb-2 font-weight-bold">Rp${Number(p.harga).toLocaleString()}</span>
                <span class="badge badge-info mb-2">Stok: ${p.stok}</span>
                <div class="d-flex align-items-center small">
                  <span><i class="bi bi-star-fill text-warning"></i> ${p.rating}</span>
                </div>
                <div class="text-muted mt-2" style="font-size:0.98rem;min-height:36px;">${p.deskripsi ? p.deskripsi : ''}</div>
              </div>
            </div>
          </a>
        </div>`;
      });
    }

    document.addEventListener('DOMContentLoaded', function() {
      renderProdukHome();
    });
  </script>
  <script src="script/navbar-scroll.js"></script>
</body>
</html>